Reserved animal report
###
Movements
###
34004
###
Displays details of reserved animals with number of reserves
###
en
###
SELECT DISTINCT animal.animalname, animal.sheltercode, animal.dateofbirth, animal.displaylocation AS location, species.speciesname, breed.breedname, 
(SELECT COUNT(*) FROM adoption WHERE ReservationDate Is Not Null
AND AnimalID = animal.ID) AS TotalReserves
FROM animal
INNER JOIN breed ON animal.breedid=breed.id 
INNER JOIN species ON animal.speciesid=species.id
INNER JOIN adoption ON animal.id=adoption.animalid
WHERE Archived = 0
ORDER BY TotalReserves DESC
###
$$HEADER
<table border="1">
<tr>
<th>ANIMALNAME</th>
<th>SHELTERCODE</th>
<th>DATEOFBIRTH</th>
<th>LOCATION</th>
<th>SPECIESNAME</th>
<th>BREEDNAME</th>
<th>TOTALRESERVES</th>
</tr>
HEADER$$

$$BODY
<tr>
<td>$ANIMALNAME</td>
<td>$SHELTERCODE</td>
<td>$DATEOFBIRTH</td>
<td>$LOCATION</td>
<td>$SPECIESNAME</td>
<td>$BREEDNAME</td>
<td>$TOTALRESERVES</td>
</tr>
BODY$$

$$FOOTER
</table>
FOOTER$$

