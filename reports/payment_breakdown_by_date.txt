Payment Breakdown By Date
###
Financial
###
33712/Any
###
All payments by type for a given date period, with totals.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT ownerdonation.Date, owner.OwnerName, donationtype.DonationName, 
Donation AS amt, ownerdonation.VatAmount, owner.OwnerAddress, owner.OwnerTown, owner.OwnerCounty, 
owner.OwnerPostcode, donationpayment.PaymentName, ownerdonation.ReceiptNumber
FROM ownerdonation 
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID 
WHERE ownerdonation.Date BETWEEN '$@from$' AND '$@to$' 
ORDER BY donationtype.DonationName, ownerdonation.Date
###
$$HEADER
HEADER$$

$$GROUP_DonationName
$$HEAD
<h2>$DonationName</h2>
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Receipt No</b></td>
<td><b>Person</b></td>
<td><b>Method</b></td>
<td><b>Tax</b></td>
<td><b>Amount</b></td>
</tr>
$$FOOT
</table>
<p><b>Total $DonationName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</b></p>
GROUP$$ 

$$BODY
<tr>
<td>$date</td>
<td>$receiptnumber</td>
<td>$ownername</td>
<td>$paymentname</td>
<td>$vatamount</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
FOOTER$$

&&&
Payment Breakdown By Method
###
Financial
###
33712/Any
###
All payments by method for a given date period, with totals.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT ownerdonation.Date, owner.OwnerName, donationtype.DonationName, 
Donation AS amt, ownerdonation.VatAmount, owner.OwnerAddress, owner.OwnerTown, owner.OwnerCounty, 
owner.OwnerPostcode, donationpayment.PaymentName, ownerdonation.ReceiptNumber
FROM ownerdonation 
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID 
WHERE ownerdonation.Date BETWEEN '$@from$' AND '$@to$' 
ORDER BY donationpayment.PaymentName, ownerdonation.Date
###
$$HEADER
HEADER$$

$$GROUP_PaymentName
$$HEAD
<h2>$PaymentName</h2>
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Receipt No</b></td>
<td><b>Person</b></td>
<td><b>Type</b></td>
<td><b>Tax</b></td>
<td><b>Amount</b></td>
</tr>
$$FOOT
</table>
<p><b>Total $PaymentName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</b></p>
GROUP$$ 
GROUP$$

$$BODY
<tr>
<td>$date</td>
<td>$receiptnumber</td>
<td>$ownername</td>
<td>$donationname</td>
<td>$vatamount</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
FOOTER$$
&&&
Payment Breakdown By Type and Method
###
Financial
###
33712/Any
###
All payments by method for a given date period, with totals.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT ownerdonation.Date, owner.OwnerName, donationtype.DonationName, 
Donation AS amt, ownerdonation.VatAmount, owner.OwnerAddress, owner.OwnerTown, owner.OwnerCounty, 
owner.OwnerPostcode, donationpayment.PaymentName, ownerdonation.ReceiptNumber
FROM ownerdonation 
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID 
WHERE ownerdonation.Date BETWEEN '$@from$' AND '$@to$' 
ORDER BY donationtype.DonationName, donationpayment.PaymentName, ownerdonation.Date
###
$$HEADER
HEADER$$

$$GROUP_DonationName
$$HEAD
<h2>$DonationName</h2>
$$FOOT
<h2>Total $DonationName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</h2>
GROUP$$ 

$$GROUP_PaymentName
$$HEAD
<h2>$PaymentName</h2>
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Receipt No</b></td>
<td><b>Person</b></td>
<td><b>Tax</b></td>
<td><b>Amount</b></td>
</tr>
$$FOOT
</table>
<p><b>Total $PaymentName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</b></p>
GROUP$$ 

$$BODY
<tr>
<td>$date</td>
<td>$receiptnumber</td>
<td>$ownername</td>
<td>$vatamount</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
FOOTER$$

&&&

Payment Breakdown By Date (Surname)
###
Financial
###
33712/Any
###
All payments for a given date period, with total, ordered by person surname.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT ownerdonation.Date, owner.OwnerName, donationtype.DonationName, 
Donation AS amt, ownerdonation.VatAmount, owner.OwnerAddress, owner.OwnerTown, owner.OwnerCounty, 
owner.OwnerPostcode, donationpayment.PaymentName, ownerdonation.ReceiptNumber
FROM ownerdonation 
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID 
WHERE ownerdonation.Date BETWEEN '$@from$' AND '$@to$' 
ORDER BY owner.OwnerSurname, ownerdonation.Date
###
$$HEADER
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Receipt No</b></td>
<td><b>Person</b></td>
<td><b>Type</b></td>
<td><b>Method</b></td>
<td><b>Tax</b></td>
<td><b>Amount</b></td>
</tr>
HEADER$$

$$BODY
<tr>
<td>$date</td>
<td>$receiptnumber</td>
<td>$ownername</td>
<td>$donationname</td>
<td>$paymentname</td>
<td>$vatamount</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
</table>
<p><b>Total: {SUM.amt.2} (Tax: {SUM.vatamount.2})</b></p>
FOOTER$$

&&&
Payment Breakdown By Date with Addresses
###
Financial
###
33712/Any
###
Produces a list of all payments by type for a given date period, with totals and addresses.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT ownerdonation.Date, owner.OwnerName, donationtype.DonationName, 
Donation AS amt, ownerdonation.VatAmount, owner.OwnerAddress, owner.OwnerTown, owner.OwnerCounty, 
owner.OwnerPostcode, donationpayment.PaymentName, ownerdonation.ReceiptNumber
FROM ownerdonation
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID 
WHERE ownerdonation.Date >= '$@from$' AND ownerdonation.Date <= '$@to$' 
ORDER BY donationtype.DonationName, ownerdonation.Date
###
$$HEADER
HEADER$$

$$GROUP_DonationName
$$HEAD
<h2>$DonationName</h2>
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Receipt No</b></td>
<td><b>Person</b></td>
<td><b>Method</b></td>
<td><b>Tax</b></td>
<td><b>Amount</b></td>
</tr>
$$FOOT
</table>
<p><b>Total $DonationName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</b></p>
GROUP$$ 
GROUP$$

$$BODY
<tr>
<td>$date</td>
<td>$receiptnumber</td>
<td><b>$ownername</b><br />
$owneraddress<br />
$ownertown<br />
$ownercounty<br />
$ownerpostcode</td>
<td>$paymentname</td>
<td>$vatamount</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
FOOTER$$

&&&
Payment Breakdown by Date and User
###
Financial
###
33712/Any
###
All payments by type for a given date period, with totals, broken down by the entering user.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT ownerdonation.Date, owner.OwnerName, donationtype.DonationName, 
Donation AS amt, owner.OwnerAddress, owner.OwnerTown, owner.OwnerCounty, 
owner.OwnerPostcode, donationpayment.PaymentName, ownerdonation.CreatedBy, ownerdonation.ReceiptNumber
FROM ownerdonation 
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID 
WHERE ownerdonation.Date BETWEEN '$@from$' AND '$@to$' 
ORDER BY ownerdonation.CreatedBy, donationtype.DonationName, ownerdonation.Date
###
$$HEADER
HEADER$$

$$GROUP_CreatedBy
$$HEAD
<h2>$CREATEDBY</h2>
$$FOOT
<p><b>Total $CREATEDBY: {SUM.amt.2}</b></p>
GROUP$$ 

$$GROUP_DonationName
$$HEAD
<h2>$DonationName</h2>
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Receipt No</b></td>
<td><b>Person</b></td>
<td><b>Method</b></td>
<td><b>Amount</b></td>
</tr>
$$FOOT
</table>
<p><b>Total $DonationName: {SUM.amt.2}</b></p>
GROUP$$ 

$$BODY
<tr>
<td>$date</td>
<td>$receiptnumber</td>
<td>$ownername</td>
<td>$paymentname</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
FOOTER$$
&&&
Payment Breakdown By Person
###
Financial
###
33712/Any
###
All payments by type and person for a given date period, with totals.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT ownerdonation.Date, owner.OwnerName, donationtype.DonationName, 
Donation AS amt, ownerdonation.VatAmount, owner.OwnerAddress, owner.OwnerTown, owner.OwnerCounty, 
owner.OwnerPostcode, donationpayment.PaymentName, ownerdonation.ReceiptNumber
FROM ownerdonation 
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID 
WHERE ownerdonation.Date BETWEEN '$@from$' AND '$@to$' 
ORDER BY owner.OwnerName, donationtype.DonationName, ownerdonation.Date
###
$$HEADER
HEADER$$

$$GROUP_OwnerName
$$HEAD
<h2>$OwnerName, $OwnerAddress $OwnerTown $OwnerCounty $OwnerPostcode</h2>
$$FOOT
<h2>Total $OwnerName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</h2>
GROUP$$

$$GROUP_DonationName
$$HEAD
<h2>$DonationName</h2>
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Receipt No</b></td>
<td><b>Person</b></td>
<td><b>Method</b></td>
<td><b>Tax</b></td>
<td><b>Amount</b></td>
</tr>
$$FOOT
</table>
<p><b>Total $DonationName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</b></p>
GROUP$$ 

$$BODY
<tr>
<td>$date</td>
<td>$receiptnumber</td>
<td>$ownername</td>
<td>$paymentname</td>
<td>$vatamount</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
FOOTER$$

&&&
Payment Breakdown By Person with Flag
###
Financial
###
33712/Any
###
All payments by type and person for a given date period, with totals, filtered by person flag.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$
$VAR flag PERSONFLAG$

SELECT ownerdonation.Date, owner.OwnerName, donationtype.DonationName, 
Donation AS amt, ownerdonation.VatAmount, owner.OwnerAddress, owner.OwnerTown, owner.OwnerCounty, 
owner.OwnerPostcode, donationpayment.PaymentName, ownerdonation.ReceiptNumber
FROM ownerdonation 
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID 
WHERE ownerdonation.Date BETWEEN '$@from$' AND '$@to$' AND owner.AdditionalFlags LIKE '%$@flag$|%' 
ORDER BY owner.OwnerName, donationtype.DonationName, ownerdonation.Date
###
$$HEADER
HEADER$$

$$GROUP_OwnerName
$$HEAD
<h2>$OwnerName, $OwnerAddress $OwnerTown $OwnerCounty $OwnerPostcode</h2>
$$FOOT
<h2>Total $OwnerName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</h2>
GROUP$$

$$GROUP_DonationName
$$HEAD
<h2>$DonationName</h2>
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Receipt No</b></td>
<td><b>Person</b></td>
<td><b>Method</b></td>
<td><b>Tax</b></td>
<td><b>Amount</b></td>
</tr>
$$FOOT
</table>
<p><b>Total $DonationName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</b></p>
GROUP$$ 

$$BODY
<tr>
<td>$date</td>
<td>$receiptnumber</td>
<td>$ownername</td>
<td>$paymentname</td>
<td>$vatamount</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
FOOTER$$

&&&

Payment Breakdown By Person with Addresses
###
Financial
###
33011/Any
###
Produces a list of all payments, totalled by person for a given date period, with addresses.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT owner.OwnerName, 
SUM(ownerdonation.Donation) AS amt, owner.OwnerAddress, owner.OwnerTown, 
owner.OwnerCounty, owner.OwnerPostcode 
FROM ownerdonation
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
WHERE ownerdonation.Date >= '$@from$' AND ownerdonation.Date <= '$@to$' 
GROUP BY owner.OwnerName, owner.OwnerAddress, owner.OwnerTown,
owner.OwnerCounty, owner.OwnerPostcode
ORDER BY owner.OwnerName
###
$$HEADER
<table border=1><tr>
<td><b>Person</b></td>
<td><b>Total</b></td>
</tr>
HEADER$$

$$BODY
<tr>
<td><b>$ownername</b><br />
$owneraddress<br />
$ownertown<br />
$ownercounty<br />
$ownerpostcode</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
</table>
<p><b>Total Donations: {SUM.amt.2}</b></p>
FOOTER$$

&&&
Payment Breakdown By Date with Addresses and Animal Info
###
Financial
###
33712/Any
###
Produces a list of all payments for a given date period, with addresses and adopted animal info where applicable
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT owner.OwnerName, 
ownerdonation.Date, ownerdonation.Donation AS amt, ownerdonation.VatAmount, owner.OwnerAddress, owner.OwnerTown, 
owner.OwnerCounty, owner.OwnerPostcode, donationtype.DonationName,
lksex.Sex, species.SpeciesName, animal.AnimalName, animal.AnimalAge,
animal.ShelterCode, donationpayment.PaymentName, ownerdonation.ReceiptNumber
FROM ownerdonation
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationtype ON ownerdonation.DonationTypeID = donationtype.ID
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
LEFT OUTER JOIN animal ON ownerdonation.AnimalID = animal.ID
LEFT OUTER JOIN species ON animal.SpeciesID = species.ID
LEFT OUTER JOIN lksex ON animal.Sex = lksex.ID
WHERE ownerdonation.Date >= '$@from$' AND ownerdonation.Date <= '$@to$' 
ORDER BY donationtype.DonationName, ownerdonation.Date
###
$$HEADER
HEADER$$

$$GROUP_DonationName
$$HEAD
<h2>$DonationName</h2>
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Receipt No</b></td>
<td><b>Person</b></td>
<td><b>Animal</b></td>
<td><b>Method</b></td>
<td><b>Tax</b></td>
<td><b>Amount</b></td>
</tr>
$$FOOT
</table>
<p><b>Total $DonationName: {SUM.amt.2} (Tax: {SUM.vatamount.2})</b></p>
GROUP$$ 

$$BODY
<tr>
<td>$date</td>
<td>$receiptnumber</td>
<td><b>$ownername</b><br />
$owneraddress<br />
$ownertown<br />
$ownercounty<br />
$ownerpostcode</td>
<td><b>$animalname</b> ($sheltercode)<br />
$sex $speciesname aged $animalage
</td>
<td>$paymentname</td>
<td>$vatamount</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
FOOTER$$
&&&
Payment Breakdown By Receipt Number
###
Financial
###
33712/PostgreSQL
###
All payments by type for a range of receipt numbers with totals.
###
en
###
$VAR from NUMBER Enter earliest receipt number$
$VAR to NUMBER Enter latest receipt number$

SELECT ownerdonation.Date, ownerdonation.DateDue, owner.OwnerName, 
donationtype.DonationName, ownerdonation.ReceiptNumber as receipt,
Donation AS amt, ownerdonation.VatAmount, owner.OwnerAddress, owner.OwnerTown, owner.OwnerCounty, 
owner.OwnerPostcode, donationpayment.PaymentName 
FROM ownerdonation 
INNER JOIN owner ON ownerdonation.OwnerID = owner.ID 
INNER JOIN donationpayment ON donationpayment.ID = ownerdonation.DonationPaymentID
INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID 
WHERE asm_to_integer(ownerdonation.ReceiptNumber) >= $@from$ AND asm_to_integer(ownerdonation.ReceiptNumber) <= $@to$
ORDER BY ownerdonation.ID
###
$$HEADER
<table border=1><tr>
<td><b>Receipt</b></td>
<td><b>Due</b></td>
<td><b>Received</b></td>
<td><b>Person</b></td>
<td><b>Method</b></td>
<td><b>Tax</b></td>
<td><b>Amount</b></td>
</tr>
HEADER$$

$$BODY
<tr>
<td>$receipt</td>
<td>$datedue</td>
<td>$date</td>
<td>$ownername</td>
<td>$paymentname</td>
<td>$vatamount</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
</table>
<p><b>Total: {SUM.amt.2} (Tax: {SUM.vatamount.2})</b></p>
FOOTER$$

